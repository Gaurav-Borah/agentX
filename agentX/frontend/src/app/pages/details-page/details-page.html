<div class="details-page">
  <!-- LEFT SIDE -->
  <button class="back-btn-top-left" (click)="goBackToDashboard()" title="Back to Dashboard"
    style="position: absolute; top: 10px; left: 10px; z-index: 100;">
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round" />
    </svg>
    Back
  </button>

  <div class="left-panel" [style.flex]="leftPanelFlex" style="display: flex; flex-direction: column;">
    <!-- YouTube Embed -->
    <div class="youtube-container" [style.height.px]="youtubeHeight">
      <iframe *ngIf="safeEmbedUrl" width="100%" [style.height.px]="youtubeHeight" [src]="safeEmbedUrl" frameborder="0"
        allowfullscreen [style.pointer-events]="resizing ? 'none' : 'auto'">
      </iframe>

      <div *ngIf="!safeEmbedUrl" class="no-video-placeholder">
        <div class="placeholder-content">
          <svg class="video-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 5v14l11-7z" fill="currentColor" />
          </svg>
          <p>No video available</p>
          <p class="url-display" *ngIf="url">URL: {{ url }}</p>
        </div>
      </div>
    </div>

    <!-- Horizontal Resizer between YouTube and Transcript -->
    <div class="horizontal-resizer" (mousedown)="onMouseDown('horizontal', $event)" title="Drag to resize video height"
      [style.pointer-events]="'auto'"></div>

    <!-- Transcript Scroll Area -->
    <div class="transcript-container" [style.flex]="'1 1 0%'">
      <div class="transcript-header">
        <h3>Transcript</h3>
      </div>

      <div class="transcript-scroll">
        <div *ngIf="transcript && transcript.trim()" class="transcript-content">
          <markdown [data]="transcript"></markdown>
        </div>

        <div *ngIf="!transcript || !transcript.trim()" class="no-transcript-placeholder">
          <p>No transcript available</p>
          <p class="help-text">Generate a summary from the dashboard to see transcript content here.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Vertical Resizer -->
  <div class="vertical-resizer" (mousedown)="onMouseDown('vertical', $event)" title="Drag to resize panels"
    [style.pointer-events]="'auto'"></div>

  <!-- RIGHT SIDE -->
  <div class="right-panel" [style.flex]="rightPanelFlex">
    <!-- Dynamic heading that changes based on content -->
    <h3>{{ showDetailedNotes ? 'Detailed Notes' : 'Summary' }}</h3>

    <div class="summary-scroll">
      <!-- Show summary if available and detailedNotes not loaded -->
      <div *ngIf="summary && summary.trim() && !showDetailedNotes" class="summary-content">
        <div class="summary-section">
          <h4>Generated Notes</h4>
          <markdown [data]="summary"></markdown>
        </div>

        <div class="summary-section">
          <h4>Actions</h4>
          <button class="generate-test-btn" type="button" (click)="generateTest()" [disabled]="generatingQuiz">
            {{ generatingQuiz ? 'Generating Test...' : 'Generate Test' }}
          </button>
          <button class="generate-test-btn" type="button" (click)="exportNotes()" [disabled]="exporting">
            {{ exporting ? 'Generating...' : 'Generate Detailed Notes' }}
          </button>
        </div>
      </div>

      <!-- Show detailed notes after export -->
      <div *ngIf="detailedNotes && detailedNotes.trim() && showDetailedNotes" class="summary-content">
        <div class="summary-section">
          <h4>Detailed Notes</h4>
          <markdown [data]="detailedNotes"></markdown>
        </div>

        <!-- Option to go back to summary -->
        <div class="summary-section">
          <button class="generate-test-btn" type="button" (click)="showDetailedNotes = false">
            Back to Summary
          </button>
        </div>
      </div>

      <!-- If no summary or detailed notes -->
      <div *ngIf="(!summary || !summary.trim()) && (!detailedNotes || !detailedNotes.trim())"
        class="no-summary-placeholder">
        <p>No notes available</p>
        <p class="help-text">Generate detailed notes from the dashboard to see content here.</p>

        <div class="placeholder-content">
          <h4>How to use this page:</h4>
          <ol>
            <li>Go back to the dashboard</li>
            <li>Paste a YouTube URL</li>
            <li>Click "Generate Summary"</li>
            <li>You'll be redirected here with the results</li>
          </ol>

          <button class="back-btn-large" (click)="goBackToDashboard()">
            Go to Dashboard
          </button>
        </div>
      </div>
    </div>
  </div>
</div>