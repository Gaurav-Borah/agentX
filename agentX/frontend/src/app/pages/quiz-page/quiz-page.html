<div class="quiz-container">
  <h1>ğŸš€ Quiz Challenge</h1>

  <!-- Show quiz source info -->
  <div class="quiz-info" *ngIf="isGeneratedQuiz">
    <p class="info-text">âœ¨ This quiz was generated from your video transcript!</p>
  </div>

  <div *ngFor="let q of qBank" class="question-card" [class.correct]="q.correct && quizSubmitted"
    [class.incorrect]="quizSubmitted && !q.correct && q.selected">

    <p class="question">{{q.id}}. {{q.question}}</p>

    <div class="options">
      <label *ngFor="let option of q.options" class="option">
        <input type="radio" [name]="'q' + q.id" [value]="option" [(ngModel)]="q.selected" [disabled]="quizSubmitted"
          (change)="selectAnswer(q.id, option)">
        <span>{{ option }}</span>
      </label>
    </div>

    <div class="feedback" *ngIf="quizSubmitted">
      <span *ngIf="q.correct" class="right">&#10004; Correct</span>
      <span *ngIf="!q.correct">âŒ Correct Answer: {{q.answer}}</span>
    </div>
  </div>

  <div class="buttons">
    <button (click)="submitQuiz()" [disabled]="quizSubmitted">Submit Quiz</button>
    <button class="reset" (click)="resetQuiz()" *ngIf="quizSubmitted">Retry</button>

    <!-- Navigation buttons -->
    <button class="nav-btn" (click)="goBackToDetails()" *ngIf="isGeneratedQuiz && !quizSubmitted">
      â† Back to Details
    </button>
    <button class="nav-btn" (click)="goBackToDashboard()">
      â† Dashboard
    </button>
  </div>

  <div class="result" *ngIf="quizSubmitted">
    <h2>ğŸ¯ Your Score: {{score}} / {{qBank.length}}</h2>

    <!-- Post-quiz navigation -->
    <div class="post-quiz-buttons">
      <button class="nav-btn" (click)="goBackToDetails()" *ngIf="isGeneratedQuiz">
        â† Back to Details
      </button>
      <button class="nav-btn" (click)="goBackToDashboard()">
        â† Dashboard
      </button>
    </div>
  </div>
</div>